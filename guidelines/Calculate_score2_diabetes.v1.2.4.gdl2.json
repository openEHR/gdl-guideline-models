{
  "id" : "Calculate_score2_diabetes.v1.2.4",
  "gdl_version" : "2.0",
  "concept" : "gt0001",
  "language" : {
    "original_language" : "ISO_639-1::en"
  },
  "description" : {
    "original_author" : {
      "name" : "Rong Chen",
      "email" : "rong.chen@cambio.se",
      "organisation" : "Cambio CDS",
      "date" : "2025-01-09"
    },
    "lifecycle_state" : "Not set",
    "details" : {
      "en" : {
        "id" : "en",
        "keywords" : [
          "SCORE2-Diabetes"
        ],
        "purpose" : "To estimate the 10-year risk of cardiovascular disease (CVD) in individuals with type 2 diabetes in Sweden only (moderate risk region)",
        "use" : "To estimate the 10-year risk of cardiovascular disease (CVD) in individuals with type 2 diabetes in Europe."
      }
    },
    "other_details" : {
      "references" : "1. Eur Heart J. 2023 Jul 21;44(28):2544-2556. doi: 10.1093/eurheartj/ehad260. SCORE2-Diabetes: 10-year cardiovascular risk estimation in type 2 diabetes in Europe",
      "en" : "fix mmol/L, update tests"
    },
    "other_contributors" : [ ]
  },
  "definition" : {
    "data_bindings" : {
      "gt0002" : {
        "id" : "gt0002",
        "type" : "INPUT",
        "model_id" : "openEHR-EHR-OBSERVATION.basic_demographic.v1",
        "template_id" : "openEHR-EHR-OBSERVATION.basic_demographic.v1",
        "elements" : {
          "gt0003" : {
            "id" : "gt0003",
            "path" : "/data[at0001]/events[at0002]/data[at0003]/items[at0004]"
          },
          "gt0004" : {
            "id" : "gt0004",
            "path" : "/data[at0001]/events[at0002]/data[at0003]/items[at0013]"
          }
        }
      },
      "gt0005" : {
        "id" : "gt0005",
        "type" : "INPUT",
        "model_id" : "openEHR-EHR-OBSERVATION.blood_pressure.v2",
        "template_id" : "openEHR-EHR-OBSERVATION.blood_pressure.v2",
        "elements" : {
          "gt0006" : {
            "id" : "gt0006",
            "path" : "/data[at0001]/events[at0006]/data[at0003]/items[at0004]"
          }
        }
      },
      "gt0007" : {
        "id" : "gt0007",
        "type" : "INPUT",
        "model_id" : "openEHR-EHR-EVALUATION.score2_diabetes.v1",
        "template_id" : "openEHR-EHR-EVALUATION.score2_diabetes.v1",
        "elements" : {
          "gt0008" : {
            "id" : "gt0008",
            "path" : "/data[at0001]/items[at0002]"
          },
          "gt0009" : {
            "id" : "gt0009",
            "path" : "/data[at0001]/items[at0007]"
          },
          "gt0010" : {
            "id" : "gt0010",
            "path" : "/data[at0001]/items[at0005]"
          },
          "gt0011" : {
            "id" : "gt0011",
            "path" : "/data[at0001]/items[at0006]"
          },
          "gt0012" : {
            "id" : "gt0012",
            "path" : "/data[at0001]/items[at0012]"
          },
          "gt0013" : {
            "id" : "gt0013",
            "path" : "/data[at0001]/items[at0013]"
          },
          "gt0014" : {
            "id" : "gt0014",
            "path" : "/data[at0001]/items[at0011]"
          }
        }
      },
      "gt0015" : {
        "id" : "gt0015",
        "type" : "OUTPUT",
        "model_id" : "openEHR-EHR-EVALUATION.score2_diabetes.v1",
        "template_id" : "openEHR-EHR-EVALUATION.score2_diabetes.v1",
        "elements" : {
          "gt0016" : {
            "id" : "gt0016",
            "path" : "/data[at0001]/items[at0010]"
          }
        }
      }
    },
    "templates" : { },
    "rules" : {
      "gt0058" : {
        "id" : "gt0058",
        "priority" : 22,
        "then" : [
          "$gt0057|scale1| = ( 0 - 0.1565 )",
          "$gt0056|scale2| = 0.8009"
        ],
        "when" : [
          "$gt0003|Gender| == local::at0005|Male|"
        ],
        "description" : ""
      },
      "gt0059" : {
        "id" : "gt0059",
        "priority" : 21,
        "then" : [
          "$gt0057|scale1| = ( 0 - 0.3143 )",
          "$gt0056|scale2| = 0.7701"
        ],
        "when" : [
          "$gt0003|Gender| == local::at0006|Female|"
        ],
        "description" : ""
      },
      "gt0050" : {
        "id" : "gt0050",
        "priority" : 20,
        "then" : [
          "$gt0018|cage| = ( $gt0004|Age|.magnitude - 60 ) / 5"
        ],
        "when" : [
          "$gt0004|Age| != null"
        ],
        "description" : ""
      },
      "gt0033" : {
        "id" : "gt0033",
        "priority" : 19,
        "then" : [
          "$gt0019|csbp| = ( $gt0006|SBP|.magnitude - 120 ) / 20"
        ],
        "when" : [
          "$gt0006|SBP| != null"
        ],
        "description" : ""
      },
      "gt0034" : {
        "id" : "gt0034",
        "priority" : 18,
        "then" : [
          "$gt0020|ctchol| = ( $gt0010|Total cholesterol |.magnitude - 6 ) / 1"
        ],
        "when" : [
          "$gt0010|Total cholesterol | != null"
        ],
        "description" : ""
      },
      "gt0035" : {
        "id" : "gt0035",
        "priority" : 17,
        "then" : [
          "$gt0021|chdl| = ( $gt0011|HDL cholesterol |.magnitude - 1.3 ) / 0.5"
        ],
        "when" : [
          "$gt0011|HDL cholesterol | != null"
        ],
        "description" : ""
      },
      "gt0036" : {
        "id" : "gt0036",
        "priority" : 16,
        "then" : [
          "$gt0022|cage*smallbin| = $gt0018|cage| * $gt0008|Smoking|.value"
        ],
        "when" : [
          "$gt0008|Smoking| != null"
        ],
        "description" : ""
      },
      "gt0037" : {
        "id" : "gt0037",
        "priority" : 15,
        "then" : [
          "$gt0023|cage*csbp| = $gt0018|cage| * $gt0019|csbp|"
        ],
        "when" : [
          "$gt0004|Age| != null",
          "$gt0006|SBP| != null"
        ],
        "description" : ""
      },
      "gt0038" : {
        "id" : "gt0038",
        "priority" : 14,
        "then" : [
          "$gt0024|cage*hxdiabbin| = $gt0018|cage| * $gt0009|Diabetes|.value"
        ],
        "when" : [
          "$gt0009|Diabetes| != 0|local::at0009|No|"
        ],
        "description" : ""
      },
      "gt0039" : {
        "id" : "gt0039",
        "priority" : 13,
        "then" : [
          "$gt0025|cage*ctchol| = $gt0018|cage| * $gt0020|ctchol|"
        ],
        "when" : [ ],
        "description" : ""
      },
      "gt0040" : {
        "id" : "gt0040",
        "priority" : 12,
        "then" : [
          "$gt0026|cage*chdl| = $gt0018|cage| * $gt0021|chdl|"
        ],
        "when" : [ ],
        "description" : ""
      },
      "gt0041" : {
        "id" : "gt0041",
        "priority" : 11,
        "then" : [
          "$gt0027|cagediab| = ( ( $gt0014|Diabetes age at diagnosis (yrs)|.magnitude - 50 ) / 5 ) * $gt0009|Diabetes|.value"
        ],
        "when" : [
          "$gt0014|Diabetes age at diagnosis (yrs)| != null"
        ],
        "description" : ""
      },
      "gt0042" : {
        "id" : "gt0042",
        "priority" : 10,
        "then" : [
          "$gt0028|chba1c| = ( $gt0012|HbA1c|.magnitude - 31 ) / 9.34"
        ],
        "when" : [
          "$gt0012|HbA1c| != null"
        ],
        "description" : ""
      },
      "gt0043" : {
        "id" : "gt0043",
        "priority" : 9,
        "then" : [
          "$gt0029|clnegfr| = ( log ( $gt0013|Ln eGFR|.magnitude ) - 4.5 ) / 0.15"
        ],
        "when" : [
          "$gt0013|Ln eGFR| != null"
        ],
        "description" : ""
      },
      "gt0047" : {
        "id" : "gt0047",
        "priority" : 8,
        "then" : [
          "$gt0030|clnegfr* clnegfr| = $gt0029|clnegfr| * $gt0029|clnegfr|"
        ],
        "when" : [ ],
        "description" : ""
      },
      "gt0048" : {
        "id" : "gt0048",
        "priority" : 7,
        "then" : [
          "$gt0031|chba1c*cage| = $gt0018|cage| * $gt0028|chba1c|"
        ],
        "when" : [ ],
        "description" : ""
      },
      "gt0049" : {
        "id" : "gt0049",
        "priority" : 6,
        "then" : [
          "$gt0032|clnegfr*cage| = $gt0018|cage| * $gt0029|clnegfr|"
        ],
        "when" : [ ],
        "description" : ""
      },
      "gt0052" : {
        "id" : "gt0052",
        "priority" : 5,
        "then" : [
          "$gt0051|Linear predictor| = $gt0018|cage| * 0.5368 + $gt0008|Smoking|.value * 0.4774 + $gt0019|csbp| * 0.1322 + $gt0009|Diabetes|.value * 0.6457 + $gt0020|ctchol| * 0.1102 - $gt0021|chdl| * 0.1087 - $gt0022|cage*smallbin| * 0.0672 - $gt0023|cage*csbp| * 0.0268 - $gt0024|cage*hxdiabbin| * 0.0983 - $gt0025|cage*ctchol| * 0.0181 + $gt0026|cage*chdl| * 0.0095 - $gt0027|cagediab| * 0.0998 + $gt0028|chba1c| * 0.0955 - $gt0029|clnegfr| * 0.0591 + $gt0030|clnegfr* clnegfr| * 0.0058 - $gt0031|chba1c*cage| * 0.0134 + $gt0032|clnegfr*cage| * 0.0115"
        ],
        "when" : [
          "$gt0003|Gender|.code == 'at0005'"
        ],
        "description" : ""
      },
      "gt0060" : {
        "id" : "gt0060",
        "priority" : 4,
        "then" : [
          "$gt0051|Linear predictor| = $gt0018|cage| * 0.6624 + $gt0008|Smoking|.value * 0.6139 + $gt0019|csbp| * 0.1421 + $gt0009|Diabetes|.value * 0.8096 + $gt0020|ctchol| * 0.1127 - $gt0021|chdl| * 0.1568 - $gt0022|cage*smallbin| * 0.1122 - $gt0023|cage*csbp| * 0.0167 - $gt0024|cage*hxdiabbin| * 0.1272 - $gt0025|cage*ctchol| * 0.0200 + $gt0026|cage*chdl| * 0.0186 - $gt0027|cagediab| * 0.118 + $gt0028|chba1c| * 0.1173 - $gt0029|clnegfr| * 0.0640 + $gt0030|clnegfr* clnegfr| * 0.0062 - $gt0031|chba1c*cage| * 0.0196 + $gt0032|clnegfr*cage| * 0.0169"
        ],
        "when" : [
          "$gt0003|Gender|.code == 'at0006'"
        ],
        "description" : ""
      },
      "gt0053" : {
        "id" : "gt0053",
        "priority" : 3,
        "then" : [
          "$gt0053|calculate un-calibrated 10-year risk| = 1 - 0.9605 ^ exp ( $gt0051|Linear predictor| )"
        ],
        "when" : [
          "$gt0051|Linear predictor| != null",
          "$gt0003|Gender|.code == 'at0005'"
        ],
        "description" : ""
      },
      "gt0061" : {
        "id" : "gt0061",
        "priority" : 2,
        "then" : [
          "$gt0053|calculate un-calibrated 10-year risk men| = 1 - 0.9776 ^ exp ( $gt0051|Linear predictor| )"
        ],
        "when" : [
          "$gt0051|Linear predictor| != null",
          "$gt0003|Gender|.code == 'at0006'"
        ],
        "description" : ""
      },
      "gt0055" : {
        "id" : "gt0055",
        "priority" : 1,
        "then" : [
          "$gt0016|10-year risk |.precision = 1",
          "$gt0016|10-year risk |.magnitude = ( 1 - exp ( 0 - exp ( $gt0057|scale1| + $gt0056|scale2| * log ( 0 - log ( 1 - $gt0053|calculate un-calibrated 10-year risk men| ) ) ) ) ) * 100",
          "$gt0016|10-year risk |.unit = '%'"
        ],
        "when" : [ ],
        "description" : ""
      }
    },
    "pre_conditions" : [
      "$gt0004|Age|.unit == 'a'",
      "$gt0006|SBP|.unit == 'mm[Hg]'",
      "$gt0010|Total cholesterol |.unit == 'mmol/L'",
      "$gt0011|HDL cholesterol |.unit == 'mmol/L'",
      "$gt0012|HbA1c|.unit == 'mmol/mol'",
      "$gt0013|Ln eGFR|.unit == 'ml/min/1.73m2'",
      "$gt0014|Diabetes age at diagnosis (yrs)|.unit == 'a'"
    ]
  },
  "ontology" : {
    "term_definitions" : {
      "en" : {
        "id" : "en",
        "terms" : {
          "gt0001" : {
            "id" : "gt0001",
            "text" : "Calculate score2 diabetes",
            "description" : "A recalibrated prediction model (SCORE2-Diabetes) to estimate the 10-year risk of cardiovascular disease (CVD) in individuals with type 2 diabetes in Europe."
          },
          "gt0002" : {
            "id" : "gt0002",
            "text" : "openEHR-EHR-OBSERVATION.basic_demographic.v1"
          },
          "gt0003" : {
            "id" : "gt0003",
            "text" : "Gender"
          },
          "gt0004" : {
            "id" : "gt0004",
            "text" : "Age"
          },
          "gt0005" : {
            "id" : "gt0005",
            "text" : "openEHR-EHR-OBSERVATION.blood_pressure.v2"
          },
          "gt0006" : {
            "id" : "gt0006",
            "text" : "SBP"
          },
          "gt0007" : {
            "id" : "gt0007",
            "text" : "openEHR-EHR-EVALUATION.score2_diabetes.v1"
          },
          "gt0008" : {
            "id" : "gt0008",
            "text" : "Smoking"
          },
          "gt0009" : {
            "id" : "gt0009",
            "text" : "Diabetes"
          },
          "gt0010" : {
            "id" : "gt0010",
            "text" : "Total cholesterol "
          },
          "gt0011" : {
            "id" : "gt0011",
            "text" : "HDL cholesterol "
          },
          "gt0012" : {
            "id" : "gt0012",
            "text" : "HbA1c"
          },
          "gt0013" : {
            "id" : "gt0013",
            "text" : "Ln eGFR"
          },
          "gt0014" : {
            "id" : "gt0014",
            "text" : "Diabetes age at diagnosis (yrs)"
          },
          "gt0015" : {
            "id" : "gt0015",
            "text" : "openEHR-EHR-EVALUATION.score2_diabetes.v1"
          },
          "gt0016" : {
            "id" : "gt0016",
            "text" : "10-year risk "
          },
          "gt0018" : {
            "text" : "cage",
            "id" : "gt0018"
          },
          "gt0019" : {
            "text" : "csbp",
            "id" : "gt0019"
          },
          "gt0020" : {
            "text" : "ctchol",
            "id" : "gt0020"
          },
          "gt0021" : {
            "text" : "chdl",
            "id" : "gt0021"
          },
          "gt0022" : {
            "text" : "cage*smallbin",
            "id" : "gt0022"
          },
          "gt0023" : {
            "text" : "cage*csbp",
            "id" : "gt0023"
          },
          "gt0024" : {
            "text" : "cage*hxdiabbin",
            "id" : "gt0024"
          },
          "gt0025" : {
            "text" : "cage*ctchol",
            "id" : "gt0025"
          },
          "gt0026" : {
            "text" : "cage*chdl",
            "id" : "gt0026"
          },
          "gt0027" : {
            "text" : "cagediab",
            "id" : "gt0027"
          },
          "gt0028" : {
            "text" : "chba1c",
            "id" : "gt0028"
          },
          "gt0029" : {
            "text" : "clnegfr",
            "id" : "gt0029"
          },
          "gt0030" : {
            "text" : "clnegfr* clnegfr",
            "id" : "gt0030"
          },
          "gt0031" : {
            "text" : "chba1c*cage",
            "id" : "gt0031"
          },
          "gt0032" : {
            "text" : "clnegfr*cage",
            "id" : "gt0032"
          },
          "gt0033" : {
            "id" : "gt0033",
            "text" : "calculate csbp",
            "description" : ""
          },
          "gt0034" : {
            "id" : "gt0034",
            "text" : "calculate ctchol",
            "description" : ""
          },
          "gt0035" : {
            "id" : "gt0035",
            "text" : "calculate chdl",
            "description" : ""
          },
          "gt0036" : {
            "id" : "gt0036",
            "text" : "calculate cage*smallbin",
            "description" : ""
          },
          "gt0037" : {
            "id" : "gt0037",
            "text" : "calculate cage*csbp",
            "description" : ""
          },
          "gt0038" : {
            "id" : "gt0038",
            "text" : "calculate cage*hxdiabbin",
            "description" : ""
          },
          "gt0039" : {
            "id" : "gt0039",
            "text" : "calculate cage*ctchol",
            "description" : ""
          },
          "gt0040" : {
            "id" : "gt0040",
            "text" : "calculate cage*chdl",
            "description" : ""
          },
          "gt0041" : {
            "id" : "gt0041",
            "text" : "calculate cagediab",
            "description" : ""
          },
          "gt0042" : {
            "id" : "gt0042",
            "text" : "calculate chba1c",
            "description" : ""
          },
          "gt0043" : {
            "id" : "gt0043",
            "text" : "calculate clnegfr",
            "description" : ""
          },
          "gt0047" : {
            "id" : "gt0047",
            "text" : "calculate clnegfr*clnegfr",
            "description" : ""
          },
          "gt0048" : {
            "id" : "gt0048",
            "text" : "calculate chba1c*cage",
            "description" : ""
          },
          "gt0049" : {
            "id" : "gt0049",
            "text" : "calculate clnegfr*cage",
            "description" : ""
          },
          "gt0050" : {
            "id" : "gt0050",
            "text" : "calculate cage",
            "description" : ""
          },
          "gt0051" : {
            "text" : "Linear predictor",
            "id" : "gt0051"
          },
          "gt0052" : {
            "id" : "gt0052",
            "text" : "calculate linear predictor men",
            "description" : ""
          },
          "gt0053" : {
            "id" : "gt0053",
            "text" : "calculate un-calibrated 10-year risk men",
            "description" : ""
          },
          "gt0054" : {
            "text" : "un-calibrated 10-year risk",
            "id" : "gt0054"
          },
          "gt0055" : {
            "id" : "gt0055",
            "text" : "calculate calibrated 10-year risk ",
            "description" : ""
          },
          "gt0056" : {
            "text" : "scale2",
            "id" : "gt0056"
          },
          "gt0057" : {
            "text" : "scale1",
            "id" : "gt0057"
          },
          "gt0058" : {
            "id" : "gt0058",
            "text" : "set scale1 and scale 2 for men in moderate risk region (Sweden)",
            "description" : ""
          },
          "gt0059" : {
            "id" : "gt0059",
            "text" : "set scale1 and scale 2 for women in moderate risk region (Sweden)",
            "description" : ""
          },
          "gt0060" : {
            "id" : "gt0060",
            "text" : "calculate linear predictor women",
            "description" : ""
          },
          "gt0061" : {
            "id" : "gt0061",
            "text" : "calculate un-calibrated 10-year risk women",
            "description" : ""
          }
        }
      }
    },
    "term_bindings" : { }
  },
  "uuid" : "b5fa33a3-14c7-447a-8df9-2fb872aec12c",
  "date" : "2025-01-09"
}