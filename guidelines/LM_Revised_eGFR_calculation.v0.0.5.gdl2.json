{
  "id" : "LM_Revised_eGFR_calculation.v0.0.5",
  "gdl_version" : "2.1",
  "concept" : "gt0001",
  "language" : {
    "original_language" : "ISO_639-1::en"
  },
  "description" : {
    "original_author" : {
      "name" : "Aurelia Maria Ozora",
      "email" : "aurelia.maria.ozora@cambio.se",
      "organisation" : "Cambio CDS",
      "date" : "2024-12-20"
    },
    "other_contributors" : [
      "Aurelia Maria Ozora"
    ],
    "lifecycle_state" : "DRAFTED",
    "details" : {
      "en" : {
        "id" : "en",
        "purpose" : "To calculate estimated GFR using revised Lund-Malmö formula.",
        "keywords" : [
          "glomerular filtration rate",
          "creatinine clearance",
          "revised LM equation",
          "LM equation",
          "LM",
          "Lund",
          "Malmö",
          "revised",
          "equation",
          "glomerular",
          "filtration",
          "rate",
          "creatinine",
          "clearance"
        ],
        "use" : "To be used in adult patients (18 years old and older). Fill in all the input fields to get the calculation.",
        "misuse" : "Not for use in patients on dialysis or with traumatic spinal cord lesions, myelomeningocele or other disorders causing marked muscle wasting.",
        "copyright" : "© Cambio CDS"
      }
    },
    "other_details" : {
      "references" : "Nyman U, Grubb A, Larsson A, Hansson LO, Flodin M, Nordin G, Lindström V, Björk J. The revised Lund-Malmö GFR estimating equation outperforms MDRD and CKD-EPI across GFR, age and BMI intervals in a large Swedish population. Clinical Chemistry and Laboratory Medicine (CCLM). 2014 Jun 1;52(6):815-24.\nBjörk J, Grubb A, Sterner G, Nyman U. Revised equations for estimating glomerular filtration rate based on the Lund-Malmö Study cohort. Scand J Clin Lab Invest. 2011 May;71(3):232-9. doi: 10.3109/00365513.2011.557086. Epub 2011 Mar 10. PMID: 21391777.",
      "en" : "Glomerular filtration rate (GFR) measures the rate at which plasma is filtered by the kidneys' functional nephrons. Obtaining an accurate GFR level is challenging. To address this, healthcare professionals rely on formulas to estimate GFR. The Lund-Malmö (LM) Study equations were developed to estimate relative GFR (eGFR) using plasma creatinine, age, and gender."
    }
  },
  "definition" : {
    "data_bindings" : {
      "gt0002" : {
        "id" : "gt0002",
        "model_id" : "openEHR-EHR-OBSERVATION.basic_demographic.v1",
        "template_id" : "openEHR-EHR-OBSERVATION.basic_demographic.v1",
        "type" : "INPUT",
        "elements" : {
          "gt0003" : {
            "id" : "gt0003",
            "path" : "/data[at0001]/events[at0002]/data[at0003]/items[at0004]",
            "data_type" : "DV_CODED_TEXT",
            "allowed_values" : [
              "local::at0005|Male|",
              "local::at0006|Female|"
            ]
          },
          "gt0004" : {
            "id" : "gt0004",
            "path" : "/data[at0001]/events[at0002]/data[at0003]/items[at0013]",
            "data_type" : "DV_QUANTITY",
            "units" : [
              "a",
              "mo",
              "wk",
              "d"
            ]
          }
        }
      },
      "gt0009" : {
        "id" : "gt0009",
        "model_id" : "openEHR-EHR-OBSERVATION.estimated_glomerular_filtration_rate.v1",
        "template_id" : "openEHR-EHR-OBSERVATION.estimated_glomerular_filtration_rate.v1",
        "type" : "OUTPUT",
        "elements" : {
          "gt0010" : {
            "id" : "gt0010",
            "path" : "/data[at0001]/events[at0002]/data[at0003]/items[at0020]"
          }
        }
      },
      "gt0017" : {
        "id" : "gt0017",
        "model_id" : "openEHR-EHR-OBSERVATION.laboratory_test_result.v1",
        "template_id" : "openEHR-EHR-OBSERVATION.laboratory_test_result.v1",
        "type" : "INPUT",
        "elements" : {
          "gt0018" : {
            "id" : "gt0018",
            "path" : "/data[at0001]/events[at0002]/data[at0003]/items[openEHR-EHR-CLUSTER.laboratory_test_analyte.v1]/items[at0024]",
            "data_type" : "DV_TEXT"
          },
          "gt0019" : {
            "id" : "gt0019",
            "path" : "/data[at0001]/events[at0002]/data[at0003]/items[openEHR-EHR-CLUSTER.laboratory_test_analyte.v1]/items[at0001]",
            "data_type" : "DV_QUANTITY",
            "units" : [
              "umol/L"
            ]
          }
        },
        "predicates" : [
          "/data[at0001]/events[at0002]/data[at0003]/items[openEHR-EHR-CLUSTER.laboratory_test_analyte.v1]/items[at0024] is_a local::gt0020|Plasma Creatinine code|"
        ]
      }
    },
    "rules" : {
      "gt0011" : {
        "id" : "gt0011",
        "priority" : 6,
        "when" : [
          "$gt0006|Plasma Creatinine|.unit=='mg/dl'"
        ],
        "then" : [
          "$gt0008|Plasma Creatinine (umol/L)|.magnitude=$gt0006|Plasma Creatinine|.magnitude*88.4",
          "$gt0008|Plasma Creatinine (umol/L)|.unit='umol/l'"
        ]
      },
      "gt0012" : {
        "id" : "gt0012",
        "priority" : 5,
        "when" : [
          "$gt0006|Plasma Creatinine|.unit=='umol/l'"
        ],
        "then" : [
          "$gt0008|Plasma Creatinine (umol/L)|=$gt0006|Plasma Creatinine|"
        ]
      },
      "gt0013" : {
        "id" : "gt0013",
        "priority" : 4,
        "when" : [
          "$gt0003|Gender|==local::at0006|Female|",
          "$gt0008|Plasma Creatinine (umol/L)|.magnitude<150"
        ],
        "then" : [
          "$gt0010|Relative eGFR|.magnitude=2.718^((2.5+(0.0121*(150-$gt0008.magnitude)))-(0.0158*$gt0004.magnitude)+(0.438*log($gt0004.magnitude)))",
          "$gt0010|Relative eGFR|.unit='ml/min/1.73m2'",
          "$gt0010|Relative eGFR|.precision=0"
        ]
      },
      "gt0014" : {
        "id" : "gt0014",
        "priority" : 3,
        "when" : [
          "$gt0003|Gender|==local::at0006|Female|",
          "$gt0008|Plasma Creatinine (umol/L)|.magnitude>=150"
        ],
        "then" : [
          "$gt0010|Relative eGFR|.magnitude=2.718^((2.5-(0.926*log($gt0008.magnitude/150)))-(0.0158*$gt0004.magnitude)+(0.438*log($gt0004.magnitude)))",
          "$gt0010|Relative eGFR|.unit='ml/min/1.73m2'",
          "$gt0010|Relative eGFR|.precision=0"
        ]
      },
      "gt0015" : {
        "id" : "gt0015",
        "priority" : 2,
        "when" : [
          "$gt0003|Gender|==local::at0005|Male|",
          "$gt0008|Plasma Creatinine (umol/L)|.magnitude<180"
        ],
        "then" : [
          "$gt0010|Relative eGFR|.magnitude=2.718^((2.56+(0.00968*(180-$gt0008.magnitude)))-(0.0158*$gt0004.magnitude)+(0.438*log($gt0004.magnitude)))",
          "$gt0010|Relative eGFR|.unit='ml/min/1.73m2'",
          "$gt0010|Relative eGFR|.precision=0"
        ]
      },
      "gt0016" : {
        "id" : "gt0016",
        "priority" : 1,
        "when" : [
          "$gt0003|Gender|==local::at0005|Male|",
          "$gt0008|Plasma Creatinine (umol/L)|.magnitude>=180"
        ],
        "then" : [
          "$gt0010|Relative eGFR|.magnitude=2.718^((2.56-(0.926*log($gt0008.magnitude/180)))-(0.0158*$gt0004.magnitude)+(0.438*log($gt0004.magnitude)))",
          "$gt0010|Relative eGFR|.unit='ml/min/1.73m2'",
          "$gt0010|Relative eGFR|.precision=0"
        ]
      }
    }
  },
  "ontology" : {
    "term_definitions" : {
      "en" : {
        "id" : "en",
        "terms" : {
          "gt0001" : {
            "id" : "gt0001",
            "text" : "Revised Lund-Malmö eGFR calculation",
            "description" : "Glomerular filtration rate (GFR) measures the rate at which plasma is filtered by the kidneys' functional nephrons. Obtaining an accurate GFR level is challenging because directly measuring GFR (mGFR) involves a complex and time-consuming process, making it impractical for routine use by clinicians and patients. To address this, healthcare professionals rely on formulas to estimate GFR. The Lund-Malmö (LM) Study equations were developed to estimate relative GFR (eGFR) using plasma creatinine, age, and gender."
          },
          "gt0002" : {
            "id" : "gt0002",
            "text" : "openEHR-EHR-OBSERVATION.basic_demographic.v1"
          },
          "gt0003" : {
            "id" : "gt0003",
            "text" : "Gender"
          },
          "gt0004" : {
            "id" : "gt0004",
            "text" : "Age"
          },
          "gt0009" : {
            "id" : "gt0009",
            "text" : "openEHR-EHR-OBSERVATION.estimated_glomerular_filtration_rate.v1"
          },
          "gt0010" : {
            "id" : "gt0010",
            "text" : "Relative eGFR"
          },
          "gt0011" : {
            "id" : "gt0011",
            "text" : "Convert pCR from mg/dl to umol/l",
            "description" : ""
          },
          "gt0012" : {
            "id" : "gt0012",
            "text" : "Set pCR (umol/l)",
            "description" : ""
          },
          "gt0013" : {
            "id" : "gt0013",
            "text" : "Calculate LM Revised for Female pCr < 150 umol/L",
            "description" : ""
          },
          "gt0014" : {
            "id" : "gt0014",
            "text" : "Calculate LM Revised for Female pCr ≥ 150 umol/L",
            "description" : ""
          },
          "gt0015" : {
            "id" : "gt0015",
            "text" : "Calculate LM Revised for Male pCr < 180 umol/L",
            "description" : ""
          },
          "gt0016" : {
            "id" : "gt0016",
            "text" : "Caclulate LM Revised for Male pCr ≥ 180 umol/L",
            "description" : ""
          },
          "gt0017" : {
            "id" : "gt0017",
            "text" : "openEHR-EHR-OBSERVATION.laboratory_test_result.v1"
          },
          "gt0018" : {
            "id" : "gt0018",
            "text" : "Plasma Creatinine"
          },
          "gt0019" : {
            "id" : "gt0019",
            "text" : "Plasma Creatinine result"
          },
          "gt0020" : {
            "id" : "gt0020",
            "text" : "Plasma Creatinine code"
          }
        }
      }
    },
    "term_bindings" : {
      "NPU" : {
        "id" : "NPU",
        "bindings" : {
          "gt0020" : {
            "codes" : [
              "NPU::NPU18016"
            ]
          }
        }
      }
    }
  }
}